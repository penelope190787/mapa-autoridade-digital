<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa da Autoridade Digital</title>
    <meta name="facebook-domain-verification" content="5gtv5ggcr9zg33owjvsejkly9c3mmo" />
    
    <!-- Meta Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '324293644059128');
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=324293644059128&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Meta Pixel Code -->
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-brown': '#6b342b',
                        'brand-orange': '#ec9949',
                        'brand-light': '#ab7253',
                        'brand-neutral': '#866e60'
                    }
                }
            }
        }
    </script>
    <style>
        body {
            box-sizing: border-box;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #6b342b 0%, #ab7253 100%);
        }
        .card-shadow {
            box-shadow: 0 10px 25px rgba(107, 52, 43, 0.1);
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .pulse-orange {
            animation: pulse-orange 2s infinite;
        }
        @keyframes pulse-orange {
            0%, 100% { box-shadow: 0 0 0 0 rgba(236, 153, 73, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(236, 153, 73, 0); }
        }
        
        .section {
            display: none;
        }
        
        .section.active {
            display: block;
        }
        
        .tab-btn {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .tab-btn:hover {
            background-color: rgba(236, 153, 73, 0.1);
        }
        
        .tab-btn.active {
            background-color: #ec9949 !important;
            color: white !important;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen bg-gradient-to-br from-brand-brown to-brand-light flex items-center justify-center p-6">
        <div class="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md">
            <div class="text-center mb-8">
                <div class="w-20 h-20 bg-brand-orange rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg">
                    <svg class="w-12 h-12 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                        <path d="M3 18h18v2H3v-2z"/>
                        <circle cx="7" cy="14" r="1"/>
                        <circle cx="17" cy="14" r="1"/>
                        <path d="M9 16h6v1H9v-1z"/>
                    </svg>
                </div>
                <h1 class="text-2xl font-bold text-brand-brown mb-2">Mapa da Autoridade Digital</h1>
                <p class="text-gray-600 text-sm">Acesse com suas credenciais da Cakto</p>
            </div>
            
            <form id="loginForm" class="space-y-6">
                <div>
                    <label for="loginEmail" class="block text-sm font-medium text-gray-700 mb-2">E-mail</label>
                    <input type="email" id="loginEmail" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent" placeholder="Seu e-mail da Cakto">
                </div>
                
                <div>
                    <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-2">Senha</label>
                    <input type="password" id="loginPassword" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent" placeholder="Sua senha da Cakto">
                </div>
                
                <button type="submit" class="w-full bg-brand-orange text-white py-3 rounded-lg font-medium hover:bg-opacity-90 transition-colors">
                    Acessar Ferramenta
                </button>
            </form>
            
            <div class="mt-6 text-center">
                <p class="text-xs text-gray-500">
                    Use as mesmas credenciais que você criou na Cakto.<br>
                    Problemas para acessar? <a href="#" class="text-brand-orange hover:underline">Contate o suporte</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header id="mainHeader" class="gradient-bg text-white py-6 px-6 shadow-lg hidden">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <div class="w-12 h-12 bg-brand-orange rounded-xl flex items-center justify-center shadow-lg">
                    <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
                    </svg>
                </div>
                <div>
                    <h1 class="text-xl md:text-2xl font-bold tracking-wide">Mapa da Autoridade Digital</h1>
                    <p class="text-brand-orange text-xs md:text-sm font-medium">Construa sua presença digital estratégica</p>
                </div>
            </div>
            
            <div class="flex items-center space-x-4">
                <div class="text-right hidden md:block">
                    <p class="text-sm text-brand-orange font-medium" id="userWelcome">Bem-vindo!</p>
                    <p class="text-xs text-gray-300" id="userPlan">Plano Básico (R$ 67)</p>
                </div>
                <button onclick="logout()" class="bg-brand-light hover:bg-opacity-80 text-white px-3 py-2 rounded-lg text-sm transition-colors">
                    Sair
                </button>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div id="mainApp" class="hidden">
        <div class="min-h-screen bg-gray-50 py-8">
            <!-- Navigation Tabs -->
            <div class="max-w-6xl mx-auto mb-8 px-4">
                <nav class="bg-white rounded-lg p-1 card-shadow">
                    <div class="flex flex-wrap justify-center space-x-1">
                        <button onclick="showSection('profile')" id="tab-profile" class="tab-btn py-3 px-4 rounded-md font-medium transition-all text-gray-600 hover:text-brand-brown">
                            📋 Perfil
                        </button>
                        <button onclick="showSection('messages')" id="tab-messages" class="tab-btn py-3 px-4 rounded-md font-medium transition-all text-gray-600 hover:text-brand-brown">
                            💬 Mensagens-Chave
                        </button>
                        <button onclick="showSection('authority')" id="tab-authority" class="tab-btn py-3 px-4 rounded-md font-medium transition-all text-gray-600 hover:text-brand-brown">
                            📊 Raio-X Autoridade
                        </button>
                        <button onclick="showSection('headlines')" id="tab-headlines" class="tab-btn py-3 px-4 rounded-md font-medium transition-all text-gray-600 hover:text-brand-brown">
                            ✨ Headlines/Bios
                        </button>
                        <button onclick="showSection('planner')" id="tab-planner" class="tab-btn py-3 px-4 rounded-md font-medium transition-all text-gray-600 hover:text-brand-brown">
                            📅 Planner/Conteúdo
                        </button>
                        <button onclick="showSection('dashboard')" id="tab-dashboard" class="tab-btn py-3 px-4 rounded-md font-medium transition-all text-gray-600 hover:text-brand-brown">
                            🎯 Dashboard
                        </button>
                    </div>
                </nav>
            </div>

            <!-- Profile Section -->
            <div id="section-profile" class="section active fade-in">
                <div class="max-w-6xl mx-auto px-4">
                    <div class="bg-white rounded-xl p-6 md:p-8 card-shadow">
                        <h2 class="text-2xl font-bold text-brand-brown mb-6">Cadastro de Perfil</h2>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Nome Completo</label>
                                <input type="text" id="userName" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent" placeholder="Seu nome completo">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Empresa</label>
                                <input type="text" id="userCompany" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent" placeholder="Nome da sua empresa">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Setor de Atuação</label>
                                <select id="userSector" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent">
                                    <option value="">Selecione seu setor</option>
                                    <option value="tecnologia">Tecnologia</option>
                                    <option value="consultoria">Consultoria</option>
                                    <option value="educacao">Educação</option>
                                    <option value="saude">Saúde</option>
                                    <option value="financeiro">Financeiro</option>
                                    <option value="marketing">Marketing Digital</option>
                                    <option value="advocacia">Advocacia</option>
                                    <option value="arquitetura">Arquitetura</option>
                                    <option value="engenharia">Engenharia</option>
                                    <option value="design">Design</option>
                                    <option value="contabilidade">Contabilidade</option>
                                    <option value="recursos-humanos">Recursos Humanos</option>
                                    <option value="vendas">Vendas</option>
                                    <option value="imobiliario">Imobiliário</option>
                                    <option value="alimentacao">Alimentação</option>
                                    <option value="moda">Moda</option>
                                    <option value="beleza">Beleza e Estética</option>
                                    <option value="fitness">Fitness e Bem-estar</option>
                                    <option value="coaching">Coaching</option>
                                    <option value="psicologia">Psicologia</option>
                                    <option value="fotografia">Fotografia</option>
                                    <option value="eventos">Eventos</option>
                                    <option value="turismo">Turismo</option>
                                    <option value="logistica">Logística</option>
                                    <option value="agricultura">Agricultura</option>
                                    <option value="outros">Outros</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Público-Alvo</label>
                                <input type="text" id="userTarget" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent" placeholder="Ex: Empreendedores, CEOs, Profissionais de TI">
                            </div>
                        </div>
                        <button onclick="saveProfile()" class="mt-6 bg-brand-orange text-white px-6 py-3 rounded-lg font-medium hover:bg-opacity-90 transition-colors pulse-orange">
                            Salvar Perfil
                        </button>
                    </div>
                </div>
            </div>

            <!-- Messages Section -->
            <div id="section-messages" class="section fade-in">
                <div class="max-w-6xl mx-auto px-4">
                    <div class="bg-white rounded-xl p-6 md:p-8 card-shadow">
                        <h2 class="text-2xl font-bold text-brand-brown mb-6">Descobrindo suas Mensagens-Chave</h2>
                        
                        <!-- Strategic Questions -->
                        <div id="strategicQuestions" class="space-y-6">
                            <div class="bg-brand-neutral bg-opacity-5 rounded-lg p-6">
                                <h3 class="text-lg font-semibold text-brand-brown mb-4">🎯 Vamos descobrir seu posicionamento através de perguntas estratégicas:</h3>
                                
                                <div class="space-y-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">1. Qual problema você resolve melhor que qualquer outra pessoa?</label>
                                        <textarea id="question1" rows="2" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent" placeholder="Ex: Ajudo empresas a automatizar processos manuais que consomem tempo..."></textarea>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">2. Qual resultado seus clientes mais valorizam no seu trabalho?</label>
                                        <textarea id="question2" rows="2" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent" placeholder="Ex: Economia de tempo, aumento de vendas, redução de custos..."></textarea>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">3. O que te motiva a fazer o que faz? Qual é seu 'porquê'?</label>
                                        <textarea id="question3" rows="2" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent" placeholder="Ex: Acredito que toda empresa merece crescer de forma sustentável..."></textarea>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">4. Qual é sua experiência ou conhecimento único que poucos têm?</label>
                                        <textarea id="question4" rows="2" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent" placeholder="Ex: 15 anos em multinacionais, certificação específica, metodologia própria..."></textarea>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">5. Como você gostaria de ser lembrado pelos seus clientes?</label>
                                        <textarea id="question5" rows="2" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent" placeholder="Ex: Como alguém confiável, inovador, que sempre entrega resultados..."></textarea>
                                    </div>
                                </div>
                                
                                <button onclick="generateMessagesFromQuestions()" class="mt-6 bg-brand-orange text-white px-6 py-3 rounded-lg font-medium hover:bg-opacity-90 transition-colors pulse-orange">
                                    🤖 Gerar Mensagens-Chave
                                </button>
                            </div>
                        </div>
                        
                        <!-- Generated Messages -->
                        <div id="generatedMessages" class="space-y-6 hidden">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Propósito Central</label>
                                <textarea id="purpose" rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent" placeholder="Seu propósito será gerado automaticamente..."></textarea>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Principais Diferenciais</label>
                                <textarea id="differentials" rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent" placeholder="Seus diferenciais serão identificados..."></textarea>
                            </div>
                            <div class="grid md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Missão</label>
                                    <textarea id="mission" rows="2" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent" placeholder="Sua missão será definida..."></textarea>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Valores</label>
                                    <textarea id="values" rows="2" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent" placeholder="Seus valores serão extraídos..."></textarea>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Frases de Impacto</label>
                                <textarea id="impactPhrases" rows="2" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent" placeholder="Frases marcantes serão sugeridas..."></textarea>
                            </div>
                            
                            <div class="flex space-x-4 mt-6">
                                <button onclick="generateAISuggestions()" class="bg-brand-brown text-white px-6 py-3 rounded-lg font-medium hover:bg-opacity-90 transition-colors">
                                    🤖 Mais Sugestões da IA
                                </button>
                                <button onclick="saveMessages()" class="bg-brand-orange text-white px-6 py-3 rounded-lg font-medium hover:bg-opacity-90 transition-colors">
                                    Salvar Mensagens
                                </button>
                                <button onclick="backToQuestions()" class="bg-gray-500 text-white px-6 py-3 rounded-lg font-medium hover:bg-opacity-90 transition-colors">
                                    ← Voltar às Perguntas
                                </button>
                            </div>
                            
                            <div id="aiSuggestions" class="mt-6 hidden">
                                <div class="bg-brand-neutral bg-opacity-10 rounded-lg p-4">
                                    <h3 class="font-medium text-brand-brown mb-3">💡 Sugestões da IA:</h3>
                                    <div id="suggestionsList" class="space-y-2"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Authority Section -->
            <div id="section-authority" class="section fade-in">
                <div class="max-w-6xl mx-auto px-4">
                    <div class="bg-white rounded-xl p-6 md:p-8 card-shadow">
                        <h2 class="text-2xl font-bold text-brand-brown mb-6">Raio-X da Autoridade Digital</h2>
                        <div class="mb-6">
                            <div class="flex justify-between items-center mb-2">
                                <span class="text-lg font-medium">Pontuação Geral</span>
                                <span id="totalScore" class="text-2xl font-bold text-brand-orange">0/100</span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-3">
                                <div id="progressBar" class="progress-bar bg-brand-orange h-3 rounded-full" style="width: 0%"></div>
                            </div>
                        </div>
                        <div class="grid md:grid-cols-2 gap-6">
                            <div class="space-y-4">
                                <h3 class="font-semibold text-brand-brown">Presença Digital</h3>
                                <div class="space-y-3">
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="authority-check w-5 h-5 text-brand-orange rounded" data-points="15">
                                        <span>LinkedIn otimizado e ativo</span>
                                        <span class="text-sm text-gray-500">(15 pts)</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="authority-check w-5 h-5 text-brand-orange rounded" data-points="10">
                                        <span>Instagram profissional</span>
                                        <span class="text-sm text-gray-500">(10 pts)</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="authority-check w-5 h-5 text-brand-orange rounded" data-points="20">
                                        <span>Site/blog próprio</span>
                                        <span class="text-sm text-gray-500">(20 pts)</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="authority-check w-5 h-5 text-brand-orange rounded" data-points="10">
                                        <span>YouTube ou podcast</span>
                                        <span class="text-sm text-gray-500">(10 pts)</span>
                                    </label>
                                </div>
                            </div>
                            <div class="space-y-4">
                                <h3 class="font-semibold text-brand-brown">Conteúdo e Engajamento</h3>
                                <div class="space-y-3">
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="authority-check w-5 h-5 text-brand-orange rounded" data-points="15">
                                        <span>Publica conteúdo regularmente</span>
                                        <span class="text-sm text-gray-500">(15 pts)</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="authority-check w-5 h-5 text-brand-orange rounded" data-points="10">
                                        <span>Interage com a audiência</span>
                                        <span class="text-sm text-gray-500">(10 pts)</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="authority-check w-5 h-5 text-brand-orange rounded" data-points="10">
                                        <span>Compartilha conhecimento</span>
                                        <span class="text-sm text-gray-500">(10 pts)</span>
                                    </label>
                                    <label class="flex items-center space-x-3 cursor-pointer">
                                        <input type="checkbox" class="authority-check w-5 h-5 text-brand-orange rounded" data-points="10">
                                        <span>Participa de eventos/lives</span>
                                        <span class="text-sm text-gray-500">(10 pts)</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div id="authorityFeedback" class="mt-6 p-4 rounded-lg hidden">
                            <h3 class="font-medium mb-2">📈 Análise da sua Autoridade:</h3>
                            <p id="feedbackText"></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Headlines Section -->
            <div id="section-headlines" class="section fade-in">
                <div class="max-w-6xl mx-auto px-4">
                    <div class="bg-white rounded-xl p-6 md:p-8 card-shadow">
                        <h2 class="text-2xl font-bold text-brand-brown mb-6">Gerador de Headlines e Bios</h2>
                        <div class="grid md:grid-cols-3 gap-6">
                            <div class="bg-gray-50 rounded-lg p-6">
                                <h3 class="font-semibold text-brand-brown mb-4 flex items-center">
                                    <svg class="w-5 h-5 mr-2 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M16.5 3.5a2.121 2.121 0 0 1 0 3L7 15l-4 1 1-4L12.5 3.5a2.121 2.121 0 0 1 3 0Z"/>
                                    </svg>
                                    LinkedIn
                                </h3>
                                <div id="linkedinHeadlines" class="space-y-3">
                                    <div class="bg-white p-3 rounded border cursor-pointer hover:border-brand-orange transition-colors" onclick="selectHeadline(this)">
                                        <p class="text-sm">Especialista em [Área] | Ajudo [Público] a [Resultado]</p>
                                    </div>
                                </div>
                                <div class="flex space-x-2 mt-4">
                                    <button onclick="generateLinkedInHeadlines()" class="flex-1 bg-brand-orange text-white py-2 rounded-lg text-sm hover:bg-opacity-90 transition-colors">
                                        Gerar Headlines
                                    </button>
                                    <button onclick="refreshLinkedInHeadlines()" class="bg-brand-brown text-white px-3 py-2 rounded-lg text-sm hover:bg-opacity-90 transition-colors">
                                        🔄
                                    </button>
                                </div>
                                <div class="text-xs text-gray-500 mt-2 text-center">
                                    <span id="linkedinCount">0</span>/10 gerações
                                </div>
                            </div>
                            <div class="bg-gray-50 rounded-lg p-6">
                                <h3 class="font-semibold text-brand-brown mb-4 flex items-center">
                                    <svg class="w-5 h-5 mr-2 text-pink-600" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"/>
                                    </svg>
                                    Instagram
                                </h3>
                                <div id="instagramBios" class="space-y-3">
                                    <div class="bg-white p-3 rounded border cursor-pointer hover:border-brand-orange transition-colors" onclick="selectHeadline(this)">
                                        <p class="text-sm">🎯 [Especialidade]<br>✨ [Benefício Principal]<br>📩 [CTA]</p>
                                    </div>
                                </div>
                                <div class="flex space-x-2 mt-4">
                                    <button onclick="generateInstagramBios()" class="flex-1 bg-brand-orange text-white py-2 rounded-lg text-sm hover:bg-opacity-90 transition-colors">
                                        Gerar Bios
                                    </button>
                                    <button onclick="refreshInstagramBios()" class="bg-brand-brown text-white px-3 py-2 rounded-lg text-sm hover:bg-opacity-90 transition-colors">
                                        🔄
                                    </button>
                                </div>
                                <div class="text-xs text-gray-500 mt-2 text-center">
                                    <span id="instagramCount">0</span>/10 gerações
                                </div>
                            </div>
                            <div class="bg-gray-50 rounded-lg p-6">
                                <h3 class="font-semibold text-brand-brown mb-4 flex items-center">
                                    <svg class="w-5 h-5 mr-2 text-brand-orange" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"/>
                                    </svg>
                                    Networking
                                </h3>
                                <div id="networkingPitches" class="space-y-3">
                                    <div class="bg-white p-3 rounded border cursor-pointer hover:border-brand-orange transition-colors" onclick="selectHeadline(this)">
                                        <p class="text-sm">"Olá, sou [Nome], [Posição] e ajudo [Público] com [Solução]"</p>
                                    </div>
                                </div>
                                <div class="flex space-x-2 mt-4">
                                    <button onclick="generateNetworkingPitches()" class="flex-1 bg-brand-orange text-white py-2 rounded-lg text-sm hover:bg-opacity-90 transition-colors">
                                        Gerar Pitches
                                    </button>
                                    <button onclick="refreshNetworkingPitches()" class="bg-brand-brown text-white px-3 py-2 rounded-lg text-sm hover:bg-opacity-90 transition-colors">
                                        🔄
                                    </button>
                                </div>
                                <div class="text-xs text-gray-500 mt-2 text-center">
                                    <span id="networkingCount">0</span>/10 gerações
                                </div>
                            </div>
                        </div>
                        <div id="selectedHeadline" class="mt-6 hidden">
                            <div class="bg-brand-neutral bg-opacity-10 rounded-lg p-4">
                                <h3 class="font-medium text-brand-brown mb-2">✅ Headline Selecionada:</h3>
                                <p id="selectedText" class="text-gray-700"></p>
                                <button onclick="copyToClipboard()" class="mt-3 bg-brand-brown text-white px-4 py-2 rounded-lg text-sm hover:bg-opacity-90 transition-colors">
                                    📋 Copiar
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Planner Section -->
            <div id="section-planner" class="section fade-in">
                <div class="max-w-6xl mx-auto px-4">
                    <div class="bg-white rounded-xl p-6 md:p-8 card-shadow">
                        <h2 class="text-2xl font-bold text-brand-brown mb-6">Planner de Conteúdo</h2>
                        <div class="flex justify-between items-center mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Quantidade de ideias</label>
                                <select id="contentAmount" class="p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-orange focus:border-transparent">
                                    <option value="7">7 ideias (1 semana)</option>
                                    <option value="14">14 ideias (2 semanas)</option>
                                    <option value="21">21 ideias (3 semanas)</option>
                                    <option value="30">30 ideias (1 mês)</option>
                                    <option value="60" class="unlimited-option" disabled>60 ideias (2 meses) - Ilimitado</option>
                                    <option value="90" class="unlimited-option" disabled>90 ideias (3 meses) - Ilimitado</option>
                                    <option value="180" class="unlimited-option" disabled>180 ideias (6 meses) - Ilimitado</option>
                                    <option value="365" class="unlimited-option" disabled>365 ideias (1 ano) - Ilimitado</option>
                                </select>
                            </div>
                            <button onclick="generateContentIdeas()" class="bg-brand-orange text-white px-6 py-3 rounded-lg font-medium hover:bg-opacity-90 transition-colors">
                                🤖 Gerar Ideias
                            </button>
                        </div>
                        <div id="contentIdeas" class="grid md:grid-cols-2 gap-4">
                            <!-- Content ideas will be generated here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Section -->
            <div id="section-dashboard" class="section fade-in">
                <div class="max-w-6xl mx-auto px-4">
                    <div class="bg-white rounded-xl p-6 md:p-8 card-shadow">
                        <h2 class="text-2xl font-bold text-brand-brown mb-6">Dashboard - Mapa Estratégico</h2>
                        <div class="space-y-8">
                            <!-- Strategic Map Visualization -->
                            <div class="bg-white border-2 border-brand-orange border-opacity-20 rounded-xl p-8">
                                <h3 class="text-2xl font-bold text-brand-brown mb-8 text-center">Seu Mapa da Autoridade Digital</h3>
                                <div class="flex flex-col md:flex-row items-center justify-between space-y-6 md:space-y-0 md:space-x-12">
                                    <div class="text-center group">
                                        <div class="w-28 h-28 bg-gradient-to-br from-brand-brown to-brand-light rounded-2xl flex items-center justify-center text-white text-3xl font-bold mx-auto mb-4 shadow-lg transform transition-transform group-hover:scale-105">
                                            🎯
                                        </div>
                                        <h4 class="font-bold text-brand-brown text-lg mb-2">Propósito</h4>
                                        <div class="bg-gray-50 rounded-lg p-3 min-h-16 flex items-center">
                                            <p id="dashboardPurpose" class="text-sm text-gray-700 leading-relaxed">Defina seu propósito</p>
                                        </div>
                                    </div>
                                    <div class="hidden md:block text-brand-orange text-3xl font-bold">→</div>
                                    <div class="text-center group">
                                        <div class="w-28 h-28 bg-gradient-to-br from-brand-orange to-yellow-500 rounded-2xl flex items-center justify-center text-white text-3xl font-bold mx-auto mb-4 shadow-lg transform transition-transform group-hover:scale-105">
                                            💬
                                        </div>
                                        <h4 class="font-bold text-brand-brown text-lg mb-2">Mensagens</h4>
                                        <div class="bg-gray-50 rounded-lg p-3 min-h-16 flex items-center">
                                            <p id="dashboardMessages" class="text-sm text-gray-700 leading-relaxed">Suas mensagens-chave</p>
                                        </div>
                                    </div>
                                    <div class="hidden md:block text-brand-orange text-3xl font-bold">→</div>
                                    <div class="text-center group">
                                        <div class="w-28 h-28 bg-gradient-to-br from-brand-light to-brand-neutral rounded-2xl flex items-center justify-center text-white text-3xl font-bold mx-auto mb-4 shadow-lg transform transition-transform group-hover:scale-105">
                                            📱
                                        </div>
                                        <h4 class="font-bold text-brand-brown text-lg mb-2">Canais</h4>
                                        <div class="bg-gray-50 rounded-lg p-3 min-h-16 flex items-center">
                                            <p id="dashboardChannels" class="text-sm text-gray-700 leading-relaxed">Presença digital</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Stats Cards -->
                            <div class="grid md:grid-cols-3 gap-6">
                                <div class="bg-brand-brown bg-opacity-5 rounded-lg p-6 text-center">
                                    <div class="text-3xl font-bold text-brand-brown" id="profileCompleteness">0%</div>
                                    <div class="text-sm text-gray-600 mt-1">Perfil Completo</div>
                                </div>
                                <div class="bg-brand-orange bg-opacity-5 rounded-lg p-6 text-center">
                                    <div class="text-3xl font-bold text-brand-orange" id="authorityScore">0</div>
                                    <div class="text-sm text-gray-600 mt-1">Pontuação Autoridade</div>
                                </div>
                                <div class="bg-brand-light bg-opacity-5 rounded-lg p-6 text-center">
                                    <div class="text-3xl font-bold text-brand-light" id="contentGenerated">0</div>
                                    <div class="text-sm text-gray-600 mt-1">Ideias Geradas</div>
                                </div>
                            </div>
                        </div>
                        <div class="mt-8 text-center">
                            <button onclick="exportToPDF()" class="bg-brand-brown text-white px-8 py-3 rounded-lg font-medium hover:bg-opacity-90 transition-colors">
                                📄 Exportar Mapa em PDF
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let currentSection = 'profile';
        let userData = {
            profile: {},
            messages: {},
            authority: 0,
            headlines: {},
            content: []
        };
        
        // Access controls
        let generationCounts = {
            linkedin: 0,
            instagram: 0,
            networking: 0
        };
        const BASIC_LIMIT = 10;
        let isUnlimited = false;
        let hasBasicAccess = true;

        // Facebook Pixel Events
        function trackPixelEvent(eventName, parameters = {}) {
            if (typeof fbq !== 'undefined') {
                fbq('track', eventName, parameters);
            }
        }

        function updateAccessFeatures() {
            const unlimitedOptions = document.querySelectorAll('.unlimited-option');
            unlimitedOptions.forEach(option => {
                if (isUnlimited) {
                    option.disabled = false;
                    option.textContent = option.textContent.replace(' - Ilimitado', '');
                }
            });
        }
        
        function loadGenerationCounts() {
            const saved = localStorage.getItem('generationCounts');
            if (saved) {
                generationCounts = JSON.parse(saved);
            }
            updateGenerationCounters();
        }
        
        function updateGenerationCounters() {
            if (isUnlimited) {
                document.getElementById('linkedinCount').textContent = '∞';
                document.getElementById('instagramCount').textContent = '∞';
                document.getElementById('networkingCount').textContent = '∞';
                
                document.querySelectorAll('.text-xs.text-gray-500').forEach(el => {
                    if (el.textContent.includes('gerações')) {
                        el.textContent = 'Ilimitado (Plano Mensal)';
                        el.classList.add('text-brand-orange', 'font-medium');
                    }
                });
            } else {
                document.getElementById('linkedinCount').textContent = generationCounts.linkedin;
                document.getElementById('instagramCount').textContent = generationCounts.instagram;
                document.getElementById('networkingCount').textContent = generationCounts.networking;
            }
        }

        // Section navigation
        function showSection(section) {
            document.querySelectorAll('.section').forEach(s => {
                s.classList.remove('active');
            });
            
            const targetSection = document.getElementById(`section-${section}`);
            if (targetSection) {
                targetSection.classList.add('active');
            }
            
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const desktopTab = document.getElementById(`tab-${section}`);
            if (desktopTab) {
                desktopTab.classList.add('active');
            }
            
            currentSection = section;
            
            if (section === 'dashboard') {
                updateDashboard();
            }
        }

        // Profile functions
        function saveProfile() {
            const profile = {
                name: document.getElementById('userName').value,
                company: document.getElementById('userCompany').value,
                sector: document.getElementById('userSector').value,
                target: document.getElementById('userTarget').value
            };
            
            userData.profile = profile;
            localStorage.setItem('mapAutoridade', JSON.stringify(userData));
            
            showNotification('Perfil salvo com sucesso!', 'success');
        }

        // Messages functions
        function saveMessages() {
            const messages = {
                purpose: document.getElementById('purpose').value,
                differentials: document.getElementById('differentials').value,
                mission: document.getElementById('mission').value,
                values: document.getElementById('values').value,
                impactPhrases: document.getElementById('impactPhrases').value
            };
            
            userData.messages = messages;
            localStorage.setItem('mapAutoridade', JSON.stringify(userData));
            
            showNotification('Mensagens salvas com sucesso!', 'success');
        }

        function generateAISuggestions() {
            const purpose = document.getElementById('purpose').value;
            const sector = userData.profile.sector || 'geral';
            
            const suggestions = generateSmartSuggestions(purpose, sector);
            
            const suggestionsDiv = document.getElementById('aiSuggestions');
            const suggestionsList = document.getElementById('suggestionsList');
            
            suggestionsList.innerHTML = suggestions.map(suggestion => 
                `<div class="bg-white p-3 rounded border cursor-pointer hover:border-brand-orange transition-colors" onclick="applySuggestion('${suggestion.field}', '${suggestion.text}')">
                    <strong>${suggestion.label}:</strong> ${suggestion.text}
                </div>`
            ).join('');
            
            suggestionsDiv.classList.remove('hidden');
        }

        function generateMessagesFromQuestions() {
            const answers = {
                q1: document.getElementById('question1').value,
                q2: document.getElementById('question2').value,
                q3: document.getElementById('question3').value,
                q4: document.getElementById('question4').value,
                q5: document.getElementById('question5').value
            };
            
            const answeredCount = Object.values(answers).filter(a => a.trim() !== '').length;
            if (answeredCount < 3) {
                showNotification('Por favor, responda pelo menos 3 perguntas para gerar suas mensagens-chave.', 'warning');
                return;
            }
            
            let purpose = '';
            if (answers.q3) {
                purpose = `${answers.q3}`;
                if (answers.q1) {
                    purpose += ` Meu foco é ${answers.q1.toLowerCase()}`;
                }
            } else if (answers.q1) {
                purpose = `Meu propósito é ${answers.q1.toLowerCase()}`;
            }
            
            let differentials = '';
            if (answers.q4) {
                differentials = answers.q4;
                if (answers.q2) {
                    differentials += `. Meus clientes valorizam especialmente: ${answers.q2.toLowerCase()}`;
                }
            } else if (answers.q2) {
                differentials = `Meu principal diferencial é entregar: ${answers.q2}`;
            }
            
            let mission = '';
            if (answers.q1) {
                mission = `Ajudar empresas e profissionais através de: ${answers.q1.toLowerCase()}`;
            }
            
            let values = '';
            if (answers.q5) {
                values = answers.q5.replace(/como alguém|como uma pessoa/gi, '').trim();
            }
            
            const impactPhrases = generateImpactPhrases(answers);
            
            document.getElementById('purpose').value = purpose;
            document.getElementById('differentials').value = differentials;
            document.getElementById('mission').value = mission;
            document.getElementById('values').value = values;
            document.getElementById('impactPhrases').value = impactPhrases;
            
            document.getElementById('strategicQuestions').classList.add('hidden');
            document.getElementById('generatedMessages').classList.remove('hidden');
            
            showNotification('Mensagens-chave geradas com sucesso! Você pode editá-las conforme necessário.', 'success');
        }
        
        function generateImpactPhrases(answers) {
            const phrases = [];
            
            if (answers.q2) {
                phrases.push(`"Transformo ${answers.q2.toLowerCase()} em realidade"`);
            }
            
            if (answers.q1) {
                const problem = answers.q1.toLowerCase();
                phrases.push(`"Especialista em ${problem}"`);
            }
            
            if (answers.q5) {
                phrases.push(`"${answers.q5}"`);
            }
            
            const sector = userData.profile.sector || 'consultoria';
            const genericPhrases = {
                tecnologia: ['"Inovação que gera resultados"', '"Tecnologia com propósito"'],
                consultoria: ['"Estratégias que funcionam"', '"Resultados comprovados"'],
                marketing: ['"Marcas que conectam"', '"Crescimento sustentável"']
            };
            
            const sectorPhrases = genericPhrases[sector] || genericPhrases.consultoria;
            phrases.push(...sectorPhrases.slice(0, 2));
            
            return phrases.slice(0, 4).join('\n');
        }
        
        function backToQuestions() {
            document.getElementById('strategicQuestions').classList.remove('hidden');
            document.getElementById('generatedMessages').classList.add('hidden');
        }

        function generateSmartSuggestions(purpose, sector) {
            const suggestions = {
                tecnologia: [
                    { field: 'purpose', label: 'Propósito', text: 'Democratizar a tecnologia para que empresas de todos os tamanhos possam inovar e crescer' },
                    { field: 'differentials', label: 'Diferencial', text: 'Soluções inovadoras que simplificam processos complexos' },
                    { field: 'mission', label: 'Missão', text: 'Transformar ideias em soluções tecnológicas que geram impacto real' },
                    { field: 'values', label: 'Valores', text: 'Inovação, simplicidade, excelência técnica' },
                    { field: 'impactPhrases', label: 'Frases de Impacto', text: '"Tecnologia que transforma"\n"Inovação com propósito"\n"Simplicidade é genialidade"' }
                ],
                consultoria: [
                    { field: 'purpose', label: 'Propósito', text: 'Acelerar o crescimento sustentável de empresas através de estratégias personalizadas' },
                    { field: 'differentials', label: 'Diferencial', text: 'Metodologia própria com resultados comprovados' },
                    { field: 'mission', label: 'Missão', text: 'Acelerar o crescimento de empresas através de estratégias personalizadas' },
                    { field: 'values', label: 'Valores', text: 'Transparência, resultados, parceria de longo prazo' },
                    { field: 'impactPhrases', label: 'Frases de Impacto', text: '"Estratégias que funcionam"\n"Crescimento com propósito"\n"Resultados comprovados"' }
                ],
                marketing: [
                    { field: 'purpose', label: 'Propósito', text: 'Conectar marcas autênticas com suas audiências ideais de forma genuína' },
                    { field: 'differentials', label: 'Diferencial', text: 'Estratégias data-driven que maximizam ROI' },
                    { field: 'mission', label: 'Missão', text: 'Conectar marcas com suas audiências de forma autêntica' },
                    { field: 'values', label: 'Valores', text: 'Criatividade, análise, resultados mensuráveis' },
                    { field: 'impactPhrases', label: 'Frases de Impacto', text: '"Marcas que conectam"\n"Autenticidade em ação"\n"Crescimento sustentável"' }
                ]
            };
            
            return suggestions[sector] || suggestions.consultoria;
        }

        function applySuggestion(field, text) {
            document.getElementById(field).value = text;
            showNotification('Sugestão aplicada!', 'success');
        }

        // Authority functions
        function setupAuthorityChecks() {
            document.querySelectorAll('.authority-check').forEach(checkbox => {
                checkbox.addEventListener('change', updateAuthorityScore);
            });
        }

        function updateAuthorityScore() {
            let totalScore = 0;
            document.querySelectorAll('.authority-check:checked').forEach(checkbox => {
                totalScore += parseInt(checkbox.dataset.points);
            });
            
            userData.authority = totalScore;
            
            document.getElementById('totalScore').textContent = `${totalScore}/100`;
            document.getElementById('progressBar').style.width = `${totalScore}%`;
            
            const feedbackDiv = document.getElementById('authorityFeedback');
            const feedbackText = document.getElementById('feedbackText');
            
            let feedback = '';
            let bgClass = '';
            
            if (totalScore >= 80) {
                feedback = 'Excelente! Você tem uma autoridade digital muito forte. Continue mantendo essa presença consistente.';
                bgClass = 'bg-green-100 text-green-800';
            } else if (totalScore >= 60) {
                feedback = 'Boa autoridade digital! Foque em melhorar os pontos em falta para alcançar o próximo nível.';
                bgClass = 'bg-yellow-100 text-yellow-800';
            } else if (totalScore >= 40) {
                feedback = 'Autoridade em desenvolvimento. Priorize criar um site próprio e publicar conteúdo regularmente.';
                bgClass = 'bg-orange-100 text-orange-800';
            } else {
                feedback = 'Há muito espaço para crescimento! Comece otimizando seu LinkedIn e criando conteúdo de valor.';
                bgClass = 'bg-red-100 text-red-800';
            }
            
            feedbackDiv.className = `mt-6 p-4 rounded-lg ${bgClass}`;
            feedbackText.textContent = feedback;
            feedbackDiv.classList.remove('hidden');
            
            localStorage.setItem('mapAutoridade', JSON.stringify(userData));
        }

        // Headlines functions
        let linkedinHeadlineSet = 0;
        let instagramBioSet = 0;
        let networkingPitchSet = 0;
        
        function generateLinkedInHeadlines() {
            if (!isUnlimited && generationCounts.linkedin >= BASIC_LIMIT) {
                showUpgradeModal('linkedin');
                return;
            }
            
            generationCounts.linkedin++;
            localStorage.setItem('generationCounts', JSON.stringify(generationCounts));
            
            // Track Facebook Pixel event
            trackPixelEvent('AddToCart', {
                content_name: 'LinkedIn Headlines Generation',
                content_category: 'Digital Marketing Tool',
                value: 67.00,
                currency: 'BRL'
            });
            
            const name = userData.profile.name || 'Seu Nome';
            const sector = userData.profile.sector || 'sua área';
            const target = userData.profile.target || 'profissionais';
            
            const allHeadlines = [
                [
                    `Especialista em ${sector} | Ajudo ${target} a alcançar resultados excepcionais`,
                    `${sector} • Transformo desafios em oportunidades para ${target}`,
                    `Consultor ${sector} | Mais de X anos ajudando ${target} a crescer`,
                    `${name} • Estratégias comprovadas em ${sector} para ${target}`,
                    `Líder em ${sector} | Conectando ${target} ao sucesso`
                ],
                [
                    `🎯 ${sector} | Resultados comprovados para ${target}`,
                    `Mentor em ${sector} • Acelero o crescimento de ${target}`,
                    `${name} | Especialista que ${target} confiam para ${sector}`,
                    `Consultor Sênior ${sector} | Transformo ${target} em líderes`,
                    `${sector} Estratégico | Parceiro de crescimento para ${target}`
                ],
                [
                    `Top Voice ${sector} | Conteúdo de valor para ${target}`,
                    `${sector} com propósito | Impacto real na vida de ${target}`,
                    `Fundador & ${sector} | Metodologia exclusiva para ${target}`,
                    `${name} • ${sector} que gera ROI para ${target}`,
                    `Palestrante ${sector} | Inspirando ${target} pelo Brasil`
                ]
            ];
            
            const headlines = allHeadlines[linkedinHeadlineSet % allHeadlines.length];
            displayHeadlines('linkedinHeadlines', headlines);
            updateGenerationCounters();
        }
        
        function refreshLinkedInHeadlines() {
            linkedinHeadlineSet++;
            generateLinkedInHeadlines();
            showNotification('Novas opções de headlines geradas!', 'success');
        }

        function generateInstagramBios() {
            if (!isUnlimited && generationCounts.instagram >= BASIC_LIMIT) {
                showUpgradeModal('instagram');
                return;
            }
            
            generationCounts.instagram++;
            localStorage.setItem('generationCounts', JSON.stringify(generationCounts));
            
            // Track Facebook Pixel event
            trackPixelEvent('AddToCart', {
                content_name: 'Instagram Bio Generation',
                content_category: 'Digital Marketing Tool',
                value: 67.00,
                currency: 'BRL'
            });
            
            const sector = userData.profile.sector || 'Especialista';
            const target = userData.profile.target || 'profissionais';
            
            const allBios = [
                [
                    `🎯 ${sector}\n✨ Ajudo ${target} a crescer\n📩 DM para parcerias`,
                    `💼 Consultor ${sector}\n🚀 Resultados comprovados\n👇 Link na bio`,
                    `⭐ Expert em ${sector}\n📈 Estratégias que funcionam\n💬 Vamos conversar?`,
                    `🔥 ${sector} apaixonado\n💡 Conteúdo de valor diário\n📲 Siga para mais dicas`,
                    `🎪 Transformo ${target}\n🌟 Através de ${sector}\n📞 Consultoria gratuita`
                ],
                [
                    `🚀 ${sector} Estratégico\n💎 Especialista em ${target}\n🎯 Resultados garantidos`,
                    `✨ Mentor ${sector}\n🔥 Conteúdo exclusivo\n📱 Stories com dicas diárias`,
                    `💡 ${sector} Inovador\n🎨 Criatividade + Estratégia\n💌 Fale comigo no DM`,
                    `🏆 Top ${sector}\n📊 Cases de sucesso\n🔗 Acesse meu conteúdo ↓`,
                    `⚡ ${sector} Disruptivo\n🌟 Transformo ${target}\n📞 Bora conversar?`
                ]
            ];
            
            const bios = allBios[instagramBioSet % allBios.length];
            displayHeadlines('instagramBios', bios);
            updateGenerationCounters();
        }
        
        function refreshInstagramBios() {
            instagramBioSet++;
            generateInstagramBios();
            showNotification('Novas opções de bio geradas!', 'success');
        }

        function generateNetworkingPitches() {
            if (!isUnlimited && generationCounts.networking >= BASIC_LIMIT) {
                showUpgradeModal('networking');
                return;
            }
            
            generationCounts.networking++;
            localStorage.setItem('generationCounts', JSON.stringify(generationCounts));
            
            // Track Facebook Pixel event
            trackPixelEvent('AddToCart', {
                content_name: 'Networking Pitch Generation',
                content_category: 'Digital Marketing Tool',
                value: 67.00,
                currency: 'BRL'
            });
            
            const name = userData.profile.name || 'Seu Nome';
            const company = userData.profile.company || 'minha empresa';
            const sector = userData.profile.sector || 'consultoria';
            const target = userData.profile.target || 'empresários';
            
            const allPitches = [
                [
                    `"Olá, sou ${name}, trabalho com ${sector} e ajudo ${target} a alcançar melhores resultados"`,
                    `"Prazer, ${name} da ${company}. Especializo em ${sector} para ${target}"`,
                    `"Oi! Sou ${name}, consultor em ${sector}. Você trabalha com ${target}?"`,
                    `"${name}, ${sector}. Adoro conectar com pessoas que trabalham com ${target}"`,
                    `"Prazer! ${name}, fundador da ${company}. Focamos em ${sector} para ${target}"`
                ]
            ];
            
            const pitches = allPitches[networkingPitchSet % allPitches.length];
            displayHeadlines('networkingPitches', pitches);
            updateGenerationCounters();
        }
        
        function refreshNetworkingPitches() {
            networkingPitchSet++;
            generateNetworkingPitches();
            showNotification('Novos pitches de networking gerados!', 'success');
        }

        function displayHeadlines(containerId, headlines) {
            const container = document.getElementById(containerId);
            container.innerHTML = headlines.map(headline => 
                `<div class="bg-white p-3 rounded border cursor-pointer hover:border-brand-orange transition-colors" onclick="selectHeadline(this)">
                    <p class="text-sm">${headline.replace(/\n/g, '<br>')}</p>
                </div>`
            ).join('');
        }

        function selectHeadline(element) {
            const text = element.querySelector('p').textContent;
            document.getElementById('selectedText').textContent = text;
            document.getElementById('selectedHeadline').classList.remove('hidden');
            
            document.querySelectorAll('.bg-brand-orange').forEach(el => {
                if (el.classList.contains('border')) {
                    el.classList.remove('bg-brand-orange', 'text-white');
                    el.classList.add('bg-white');
                }
            });
            
            element.classList.add('bg-brand-orange', 'text-white');
            element.classList.remove('bg-white');
        }

        function copyToClipboard() {
            const text = document.getElementById('selectedText').textContent;
            navigator.clipboard.writeText(text).then(() => {
                showNotification('Copiado para a área de transferência!', 'success');
            }).catch(() => {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showNotification('Copiado para a área de transferência!', 'success');
            });
        }

        // Content planner functions
        function generateContentIdeas() {
            const amount = parseInt(document.getElementById('contentAmount').value);
            
            if (!isUnlimited && amount > 30) {
                showUpgradeModal('planner');
                return;
            }
            
            const sector = userData.profile.sector || 'geral';
            const target = userData.profile.target || 'profissionais';
            
            const ideas = generateContentForSector(sector, target, amount);
            userData.content = ideas;
            
            const container = document.getElementById('contentIdeas');
            container.innerHTML = ideas.map((idea, index) => 
                `<div class="bg-gray-50 rounded-lg p-4 border hover:border-brand-orange transition-colors">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-medium text-brand-brown">Dia ${index + 1}</h4>
                        <span class="text-xs bg-brand-orange text-white px-2 py-1 rounded">${idea.type}</span>
                    </div>
                    <p class="text-sm text-gray-700 mb-2">${idea.title}</p>
                    <p class="text-xs text-gray-500">${idea.description}</p>
                    <div class="mt-3 flex space-x-2">
                        <button onclick="copyContent('${idea.title}')" class="text-xs bg-brand-brown text-white px-3 py-1 rounded hover:bg-opacity-90 transition-colors">
                            Copiar
                        </button>
                        <button onclick="expandIdea(${index})" class="text-xs bg-brand-light text-white px-3 py-1 rounded hover:bg-opacity-90 transition-colors">
                            Expandir
                        </button>
                    </div>
                </div>`
            ).join('');
            
            localStorage.setItem('mapAutoridade', JSON.stringify(userData));
        }

        function generateContentForSector(sector, target, amount) {
            const contentTemplates = {
                tecnologia: [
                    { type: 'Dica', title: 'Como a automação pode economizar 5 horas por semana', description: 'Compartilhe ferramentas práticas de automação' },
                    { type: 'Tendência', title: 'As 3 tecnologias que vão dominar 2024', description: 'Análise de tendências tecnológicas' },
                    { type: 'Case', title: 'Como implementamos IA e aumentamos produtividade em 40%', description: 'Estudo de caso real com resultados' },
                    { type: 'Tutorial', title: 'Passo a passo: Configurando seu primeiro chatbot', description: 'Guia prático para iniciantes' },
                    { type: 'Reflexão', title: 'Por que a transformação digital falha em 70% das empresas?', description: 'Análise dos principais obstáculos' }
                ],
                consultoria: [
                    { type: 'Estratégia', title: '5 sinais de que sua empresa precisa de consultoria', description: 'Indicadores práticos para empresários' },
                    { type: 'Case', title: 'Como ajudamos uma startup a crescer 300% em 6 meses', description: 'Estudo de caso com metodologia' },
                    { type: 'Dica', title: 'O framework que uso para resolver qualquer problema de negócio', description: 'Metodologia prática aplicável' },
                    { type: 'Mercado', title: 'As 3 mudanças que todo empresário deve fazer em 2024', description: 'Tendências e adaptações necessárias' },
                    { type: 'Reflexão', title: 'Por que contratar um consultor é um investimento, não um gasto', description: 'ROI e benefícios da consultoria' }
                ],
                marketing: [
                    { type: 'Dica', title: 'Como aumentar engajamento no LinkedIn em 7 dias', description: 'Estratégias práticas e testadas' },
                    { type: 'Análise', title: 'Por que 90% das campanhas no Instagram falham?', description: 'Erros comuns e como evitá-los' },
                    { type: 'Ferramenta', title: 'As 5 ferramentas gratuitas que uso para criar conteúdo', description: 'Lista com links e tutoriais' },
                    { type: 'Tendência', title: 'Marketing conversacional: o futuro já chegou', description: 'Como implementar em sua estratégia' },
                    { type: 'Case', title: 'Como geramos 50 leads qualificados com R$ 500 de investimento', description: 'Estratégia detalhada passo a passo' }
                ]
            };
            
            const templates = contentTemplates[sector] || contentTemplates.consultoria;
            const ideas = [];
            
            for (let i = 0; i < amount; i++) {
                const template = templates[i % templates.length];
                ideas.push({
                    ...template,
                    title: template.title.replace(/sua empresa|empresários/, target)
                });
            }
            
            return ideas;
        }

        function copyContent(title) {
            navigator.clipboard.writeText(title).then(() => {
                showNotification('Ideia copiada!', 'success');
            });
        }

        function expandIdea(index) {
            const idea = userData.content[index];
            showNotification('Funcionalidade de expandir ideia em desenvolvimento!', 'info');
        }

        // Dashboard functions
        function updateDashboard() {
            const purpose = userData.messages.purpose || 'Defina seu propósito na aba Mensagens-Chave';
            document.getElementById('dashboardPurpose').textContent = purpose.substring(0, 50) + (purpose.length > 50 ? '...' : '');
            
            const differentials = userData.messages.differentials || 'Defina seus diferenciais';
            document.getElementById('dashboardMessages').textContent = differentials.substring(0, 50) + (differentials.length > 50 ? '...' : '');
            
            const authorityScore = userData.authority || 0;
            let channelsText = 'Configure seu Raio-X';
            if (authorityScore > 0) {
                channelsText = `${authorityScore} pontos de autoridade`;
            }
            document.getElementById('dashboardChannels').textContent = channelsText;
            
            const profileFields = Object.values(userData.profile).filter(v => v && v.trim() !== '').length;
            const profileCompleteness = Math.round((profileFields / 4) * 100);
            document.getElementById('profileCompleteness').textContent = `${profileCompleteness}%`;
            
            document.getElementById('authorityScore').textContent = userData.authority || 0;
            document.getElementById('contentGenerated').textContent = userData.content.length || 0;
        }

        // Export functions
        function exportToPDF() {
            showNotification('Gerando seu Mapa da Autoridade Digital...', 'info');
            
            const pdfContent = generatePDFContent();
            
            const blob = new Blob([pdfContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `Mapa_Autoridade_Digital_${userData.profile.name || 'Usuario'}.txt`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            
            showNotification('Mapa exportado com sucesso! Arquivo baixado.', 'success');
        }
        
        function generatePDFContent() {
            const profile = userData.profile || {};
            const messages = userData.messages || {};
            const authority = userData.authority || 0;
            const contentCount = userData.content?.length || 0;
            
            return `
═══════════════════════════════════════════════════════════════
                    MAPA DA AUTORIDADE DIGITAL
═══════════════════════════════════════════════════════════════

📋 PERFIL PROFISSIONAL
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Nome: ${profile.name || 'Não informado'}
Empresa: ${profile.company || 'Não informado'}
Setor: ${profile.sector || 'Não informado'}
Público-Alvo: ${profile.target || 'Não informado'}

💬 MENSAGENS-CHAVE
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎯 PROPÓSITO CENTRAL:
${messages.purpose || 'Não definido'}

🌟 PRINCIPAIS DIFERENCIAIS:
${messages.differentials || 'Não definido'}

🚀 MISSÃO:
${messages.mission || 'Não definido'}

💎 VALORES:
${messages.values || 'Não definido'}

⚡ FRASES DE IMPACTO:
${messages.impactPhrases || 'Não definido'}

📊 ANÁLISE DE AUTORIDADE
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Pontuação Atual: ${authority}/100 pontos

Status da Autoridade:
${authority >= 80 ? '🟢 EXCELENTE - Autoridade digital muito forte' :
  authority >= 60 ? '🟡 BOA - Autoridade em bom nível' :
  authority >= 40 ? '🟠 DESENVOLVIMENTO - Autoridade em crescimento' :
  '🔴 INICIAL - Muito espaço para crescimento'}

📈 ESTATÍSTICAS
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
• Perfil Completo: ${Math.round((Object.values(profile).filter(v => v && v.trim() !== '').length / 4) * 100)}%
• Pontuação de Autoridade: ${authority} pontos
• Ideias de Conteúdo Geradas: ${contentCount}

═══════════════════════════════════════════════════════════════
Gerado em: ${new Date().toLocaleDateString('pt-BR')} às ${new Date().toLocaleTimeString('pt-BR')}
Ferramenta: Mapa da Autoridade Digital
═══════════════════════════════════════════════════════════════
            `.trim();
        }

        // Utility functions
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            const colors = {
                success: 'bg-green-500',
                error: 'bg-red-500',
                info: 'bg-blue-500',
                warning: 'bg-yellow-500'
            };
            
            notification.className = `fixed top-4 right-4 ${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg z-50 transform transition-transform duration-300 translate-x-full`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.remove('translate-x-full');
            }, 100);
            
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        function loadUserData() {
            const saved = localStorage.getItem('mapAutoridade');
            if (saved) {
                userData = JSON.parse(saved);
                
                if (userData.profile) {
                    Object.keys(userData.profile).forEach(key => {
                        const element = document.getElementById(`user${key.charAt(0).toUpperCase() + key.slice(1)}`);
                        if (element) element.value = userData.profile[key];
                    });
                }
                
                if (userData.messages) {
                    Object.keys(userData.messages).forEach(key => {
                        const element = document.getElementById(key);
                        if (element) element.value = userData.messages[key];
                    });
                }
                
                if (userData.authority) {
                    updateAuthorityScore();
                }
            }
        }

        // Upgrade modal functions
        function showUpgradeModal(feature) {
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            
            let message = '';
            if (feature === 'planner') {
                message = 'Para gerar planner acima de 30 dias, você precisa do Plano Ilimitado!';
            } else {
                message = `Você atingiu o limite de ${BASIC_LIMIT} gerações. Upgrade para continuar!`;
            }
            
            modal.innerHTML = `
                <div class="bg-white rounded-xl p-8 max-w-md w-full">
                    <div class="text-center">
                        <div class="w-16 h-16 bg-brand-orange rounded-full flex items-center justify-center mx-auto mb-4">
                            <span class="text-2xl">🚀</span>
                        </div>
                        <h3 class="text-2xl font-bold text-brand-brown mb-4">Upgrade para Ilimitado</h3>
                        <p class="text-gray-600 mb-6">${message}</p>
                        
                        <div class="bg-gray-50 rounded-lg p-4 mb-6">
                            <h4 class="font-semibold text-brand-brown mb-3">🌟 Benefícios Ilimitados:</h4>
                            <ul class="text-sm text-gray-700 space-y-2 text-left">
                                <li>✅ Headlines e bios ilimitadas</li>
                                <li>✅ Planner de conteúdo até 365 dias</li>
                                <li>✅ Análises avançadas</li>
                                <li>✅ Suporte prioritário</li>
                                <li>✅ Novos recursos em primeira mão</li>
                            </ul>
                        </div>
                        
                        <div class="space-y-3">
                            <button onclick="upgradeToUnlimited()" class="w-full bg-brand-orange text-white py-3 rounded-lg font-medium hover:bg-opacity-90 transition-colors">
                                Assinar Ilimitado - R$ 29,90/mês
                            </button>
                            <button onclick="this.closest('.fixed').remove()" class="w-full bg-gray-200 text-gray-700 py-2 rounded-lg font-medium hover:bg-gray-300 transition-colors">
                                Continuar com Limite
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }
        
        function upgradeToUnlimited() {
            // Track Facebook Pixel event
            trackPixelEvent('InitiateCheckout', {
                content_name: 'Mapa da Autoridade Digital - Plano Ilimitado',
                content_category: 'Digital Marketing Tool',
                value: 29.90,
                currency: 'BRL'
            });
            
            const checkoutUrl = 'https://cakto.com.br/checkout/SEU_PRODUTO_UPGRADE_ID';
            
            const checkoutWindow = window.open(checkoutUrl, '_blank', 'noopener,noreferrer');
            
            const modal = document.querySelector('.fixed.inset-0');
            if (modal) modal.remove();
            
            showNotification('Redirecionando para o checkout da Cakto...', 'info');
        }
        
        // Authentication functions for Cakto integration
        function handleLogin(event) {
            event.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!email || !password) {
                showNotification('Por favor, preencha todos os campos', 'error');
                return;
            }
            
            // Track Facebook Pixel event
            trackPixelEvent('InitiateCheckout', {
                content_name: 'Mapa da Autoridade Digital - Login Attempt',
                content_category: 'Digital Marketing Tool',
                value: 67.00,
                currency: 'BRL'
            });
            
            authenticateWithCakto(email, password);
        }
        
        function authenticateWithCakto(email, password) {
            const submitBtn = document.querySelector('#loginForm button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'Verificando...';
            submitBtn.disabled = true;
            
            // Check for purchase callback parameters
            const urlParams = new URLSearchParams(window.location.search);
            const callbackEmail = urlParams.get('email');
            const callbackStatus = urlParams.get('status');
            const callbackPlan = urlParams.get('plan');
            
            setTimeout(() => {
                let loginSuccess = false;
                let isUnlimitedUser = false;
                
                // Check if this is a callback from Cakto purchase
                if (callbackEmail && callbackStatus === 'approved') {
                    if (email === callbackEmail) {
                        loginSuccess = true;
                        isUnlimitedUser = callbackPlan === 'unlimited';
                        
                        // Track successful purchase
                        trackPixelEvent('Purchase', {
                            content_name: 'Mapa da Autoridade Digital',
                            content_category: 'Digital Marketing Tool',
                            value: isUnlimitedUser ? 29.90 : 67.00,
                            currency: 'BRL'
                        });
                        
                        // Clear URL parameters
                        window.history.replaceState({}, document.title, window.location.pathname);
                    }
                } else {
                    // Simulate API call to Cakto for verification
                    // In production, this would be a real API call
                    loginSuccess = true; // For demo purposes
                }
                
                if (loginSuccess) {
                    const userData = {
                        email: email,
                        hasBasicAccess: true,
                        isUnlimited: isUnlimitedUser,
                        loginTime: new Date().toISOString()
                    };
                    
                    localStorage.setItem('caktoUserData', JSON.stringify(userData));
                    
                    hasBasicAccess = true;
                    isUnlimited = userData.isUnlimited;
                    
                    showMainApp(email);
                    
                    showNotification('Login realizado com sucesso!', 'success');
                } else {
                    showNotification('Credenciais inválidas ou acesso não autorizado', 'error');
                    submitBtn.textContent = originalText;
                    submitBtn.disabled = false;
                }
            }, 2000);
        }
        
        function showMainApp(userEmail) {
            document.getElementById('loginScreen').classList.add('hidden');
            
            document.getElementById('mainHeader').classList.remove('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            
            document.getElementById('userWelcome').textContent = `Bem-vindo, ${userEmail.split('@')[0]}!`;
            
            const planText = isUnlimited ? 'Plano Ilimitado (R$ 29,90/mês)' : 'Plano Básico (R$ 67)';
            document.getElementById('userPlan').textContent = planText;
            
            checkCaktoAuth();
            
            loadUserData();
        }
        
        function logout() {
            localStorage.removeItem('caktoUserData');
            
            document.getElementById('mainHeader').classList.add('hidden');
            document.getElementById('mainApp').classList.add('hidden');
            
            document.getElementById('loginScreen').classList.remove('hidden');
            
            document.getElementById('loginForm').reset();
            
            hasBasicAccess = false;
            isUnlimited = false;
            
            showNotification('Logout realizado com sucesso!', 'success');
        }
        
        function checkCaktoAuth() {
            const savedUser = localStorage.getItem('caktoUserData');
            if (savedUser) {
                const userData = JSON.parse(savedUser);
                
                const loginTime = new Date(userData.loginTime);
                const now = new Date();
                const hoursSinceLogin = (now - loginTime) / (1000 * 60 * 60);
                
                if (hoursSinceLogin < 24) {
                    hasBasicAccess = userData.hasBasicAccess;
                    isUnlimited = userData.isUnlimited;
                    
                    checkSubscriptionStatus(userData.email);
                    
                    showMainApp(userData.email);
                    return;
                }
            }
            
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('mainHeader').classList.add('hidden');
            document.getElementById('mainApp').classList.add('hidden');
        }
        
        function checkSubscriptionStatus(email) {
            setTimeout(() => {
                const unlimitedAccess = localStorage.getItem('caktoUnlimitedAccess');
                isUnlimited = unlimitedAccess === 'true';
                
                updateAccessFeatures();
                updateGenerationCounters();
                
                const planText = isUnlimited ? 'Plano Ilimitado (R$ 29,90/mês)' : 'Plano Básico (R$ 67)';
                document.getElementById('userPlan').textContent = planText;
            }, 1000);
        }
        
        // Inicialização da aplicação
        function initializeApp() {
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            
            checkCaktoAuth();
            
            setupAuthorityChecks();
            loadGenerationCounts();
        }

        // Prevent form submissions from navigating
        document.addEventListener('submit', function(e) {
            e.preventDefault();
        });
        
        // Initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9923ac7e521001ac',t:'MTc2MTA4MDMxNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
